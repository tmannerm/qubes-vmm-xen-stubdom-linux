## based on linux/kernel/configs/tiny.config
CONFIG_CC_OPTIMIZE_FOR_SIZE=y
# xz needs potentialy more RAM so better use gzip (and disk space is not
# relevant here)
#CONFIG_KERNEL_GZIP=y
CONFIG_OPTIMIZE_INLINING=y
CONFIG_SLUB=y
CONFIG_COMPACTION=y
CONFIG_SCHED_OMIT_FRAME_POINTER=y
CONFIG_X86_FAST_FEATURE_TESTS=y
CONFIG_JUMP_LABEL=y

## 4.14 optimisation
CONFIG_SLAB_MERGE_DEFAULT=y
CONFIG_UNWINDER_GUESS=y

## enable 64 bit support
CONFIG_64BIT=y

## 64 bit optimisation
CONFIG_VMAP_STACK=y
CONFIG_SPARSEMEM_VMEMMAP=y

## 4.9 kernel hardening options
CONFIG_ARCH_MMAP_RND_BITS=32
CONFIG_CC_STACKPROTECTOR_STRONG=y
CONFIG_RELOCATABLE=y
CONFIG_RANDOMIZE_BASE=y
CONFIG_RANDOMIZE_MEMORY=y

CONFIG_SLAB_FREELIST_RANDOM=y
CONFIG_PAGE_POISONING=y
CONFIG_PAGE_POISONING_ZERO=y
CONFIG_HARDENED_USERCOPY=y
#CONFIG_HARDENED_USERCOPY_PAGESPAN=y

CONFIG_LEGACY_VSYSCALL_NONE=y
CONFIG_SCHED_STACK_END_CHECK=y
CONFIG_DEBUG_STACKOVERFLOW=y
CONFIG_X86_MCE=y
CONFIG_PANIC_ON_OOPS=y
CONFIG_STRIP_ASM_SYMS=y

## 4.14 kernel hardening options
CONFIG_RETPOLINE=y
CONFIG_SLAB_FREELIST_HARDENED=y
CONFIG_REFCOUNT_FULL=y
CONFIG_BUG_ON_DATA_CORRUPTION=y
CONFIG_FORTIFY_SOURCE=y
CONFIG_STATIC_USERMODEHELPER=y
CONFIG_STATIC_USERMODEHELPER_PATH=""

## GCC plugin hardening options
CONFIG_GCC_PLUGINS=y
CONFIG_GCC_PLUGIN_LATENT_ENTROPY=y
CONFIG_GCC_PLUGIN_STRUCTLEAK=y
CONFIG_GCC_PLUGIN_STRUCTLEAK_BYREF_ALL=y
CONFIG_GCC_PLUGIN_RANDSTRUCT=y
CONFIG_GCC_PLUGIN_RANDSTRUCT_PERFORMANCE=y

## Extra PCI compatability?
#CONFIG_ZONE_DMA=y
#CONFIG_BOUNCE=y

## iniramfs
CONFIG_BLK_DEV_INITRD=y
CONFIG_RD_GZIP=y

## misc
CONFIG_NO_HZ_IDLE=y
CONFIG_BINFMT_ELF=y
CONFIG_BINFMT_SCRIPT=y
CONFIG_PROC_FS=y
CONFIG_PROC_SYSCTL=y
CONFIG_SYSFS=y
CONFIG_DEVTMPFS=y
CONFIG_PRINTK=y
CONFIG_BUG=y

CONFIG_LOCALVERSION="-xen-stubdom"
CONFIG_DEFAULT_HOSTNAME="xen-stubdom"
